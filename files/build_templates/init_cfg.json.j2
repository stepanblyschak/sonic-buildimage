{%- set features = ["sflow", "telemetry"] -%}
{%- set containers = ["bgp", "database", "dhcp_relay", "lldp", "nat", "pmon", "radv", "restapi", "sflow", "snmp", "swss", "syncd", "teamd", "telemetry"] -%}
{%- if sonic_asic_platform == "mellanox" -%}
{%- do features.append("what-just-happened") -%}
{%- do containers.append("what-just-happened") -%}
{%- endif -%}
{
    "DEVICE_METADATA": {
        "localhost": {
            "default_bgp_status": {% if shutdown_bgp_on_start == "y" %}"down"{% else %}"up"{% endif %},
            "default_pfcwd_status": {% if enable_pfcwd_on_start == "y" %}"enable"{% else %}"disable"{% endif %}
        }
    },
    "CRM": {
        "Config": {
            "polling_interval": "300",
{%- for crm_res in ["ipv4_route", "ipv6_route", "ipv4_nexthop", "ipv6_nexthop", "ipv4_neighbor",
                    "ipv6_neighbor", "nexthop_group_member", "nexthop_group", "acl_table",
                    "acl_group", "acl_entry", "acl_counter", "fdb_entry"] %}
            "{{crm_res}}_threshold_type": "percentage",
            "{{crm_res}}_low_threshold": "70",
            "{{crm_res}}_high_threshold": "85"{% if not loop.last %},{% endif -%}
{% endfor %}
        }
    },
{#- what-just-happened default configuration section -#}
{%- if "what-just-happened" in features %}
    "WJH": {
        "global": {
            "nice_level": "1",
            "pci_bandwidth": "50",
            "mode": "debug"
        }
    },
    "WJH_CHANNEL": {
        "forwarding": {
            "type": "raw",
            "drop_category_list": "L2,L3,Tunnel"
        }
    },
{%- endif %}
    "FEATURE": {
{%- for feature in features %}
        "{{feature}}": {
            "status": "disabled"
        }{% if not loop.last %},{% endif -%}
{% endfor %}
    },
    "CONTAINER_FEATURE": {
{%- for container in containers %}
        "{{container}}": {
            "auto_restart": "disabled",
            "high_mem_alert": "disabled"
        }{% if not loop.last %},{% endif -%}
{% endfor %}
    }
}
